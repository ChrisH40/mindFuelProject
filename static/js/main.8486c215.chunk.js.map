{"version":3,"sources":["components/settings.js","components/drawUtil.js","components/Canvas.js","components/CustomMoveCtrl.js","components/moveUtil.js","App.js","serviceWorker.js","index.js"],"names":["UNIT","Math","floor","SIZE","cellSize","ctx","x","y","fillStyle","lineStyle","labelFillStyle","fillRect","lineWidth","beginPath","moveTo","font","setLineDash","i","lineTo","fillText","DIMENSION","strokeStyle","stroke","x1","y1","x2","y2","x3","y3","closePath","fill","text","Canvas","props","canvasEl","useRef","useEffect","current","getContext","clearRect","width","height","d","lose","target","win","id","ref","style","border","CustomMoveCtrl","movement","translate","reflect","rotate","onDragOver","ev","preventDefault","cursor","onDrop","category","name","dataTransfer","getData","moves","filter","move","moveType","triangleCoords","reflectX","reflectY","cre","ixt","iyt","ixro","iyro","rotateFactor","displayMoves","preStage","staged","forEach","t","push","key","onDragStart","moving","e","setData","draggable","className","PI","mapToCanvasCoords","gameCoords","mapped","Object","entries","value","includes","mapToGameCoords","canvasCoords","reorgCoords","coords","reorgedCoords","coordPair","slice","length","assign","xr","yr","deg","rotated","sinDeg","sin","cosDeg","cos","idx","pt","round","xu","yu","mapToGameCoordsInPixel","translated","gameCoordsInPixel","mapToCanvasCoordsFromPixel","a","b","c","reflected","App","iX","iY","triangle","useState","setCurrent","setMoving","setCoords","setMoves","setWin","setLose","handleTranslateAnimate","destination","setTimeout","winLoseCheck","handleRotateAnimate","rotateDest","m","exit","JSON","stringify","movesLeft","find","undefined","position","top","left","transform","xUnit","yUnit","transformedCoords","onClick","window","location","reload","Boolean","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.8486c215.chunk.js","sourcesContent":["// Grid size\r\nexport const SIZE = 800;\r\n// Grid to border margin\r\nexport const GRID_MARGIN = SIZE * 0.025;\r\n// Units for x, y axis\r\nexport const DIMENSION = 20;\r\nexport const UNIT = Math.floor(SIZE / DIMENSION);\r\n// Shape of object (not limited to triangle), points coords in counter-clock wise order\r\n// (iX, iY) is the first point of the object, defaut setting: a 3-4-5 triangle\r\nexport const initTriangleShape = (iX, iY) => {\r\n  return {\r\n    x1: iX,\r\n    y1: iY,\r\n    x2: iX,\r\n    y2: iY + UNIT * 3,\r\n    x3: iX + UNIT * 4,\r\n    y3: iY + UNIT * 3\r\n  };\r\n};\r\n\r\nexport const AXIS_LABEL_SIZE = \"1.1em\";","import { SIZE, GRID_MARGIN, DIMENSION, AXIS_LABEL_SIZE } from \"./settings\";\r\n\r\nconst cellSize = Math.floor(SIZE / DIMENSION);\r\n\r\nexport default {\r\n\r\n  getCanvasXYOffset: canvas => {\r\n    return {\r\n      x: Math.floor(canvas.getBoundingClientRect().x),\r\n      y: Math.floor(canvas.getBoundingClientRect().y)\r\n    };\r\n  },\r\n\r\n  drawDot: (x = GRID_MARGIN, y = GRID_MARGIN, ctx) => {\r\n    ctx.fillStyle = \"orange\";\r\n    ctx.fillRect(x, y, 10, 10);\r\n  },\r\n\r\n  drawGrid: ({\r\n    ctx,\r\n    x = GRID_MARGIN,\r\n    y = GRID_MARGIN,\r\n    fillStyle = \"rgba(255,255,255,1)\",\r\n    lineStyle = \"black\",\r\n    labelFillStyle = \"black\"\r\n  }) => {\r\n    ctx.fillStyle = fillStyle;\r\n    ctx.fillRect(x, y, SIZE, SIZE);\r\n    ctx.lineWidth = 1;\r\n    ctx.beginPath();\r\n    ctx.moveTo(x, y);\r\n    ctx.font = `${AXIS_LABEL_SIZE} menlo`;\r\n    ctx.setLineDash([2, 2]);\r\n    for (let i = 0; i <= DIMENSION; i++) {\r\n      ctx.moveTo(x, y + cellSize * i);\r\n      ctx.lineTo(x + SIZE, y + cellSize * i);\r\n      ctx.fillStyle = labelFillStyle;\r\n      ctx.fillText(\r\n        `${\r\n        i === DIMENSION / 2\r\n          ? \"\"\r\n          : i < DIMENSION / 2\r\n            ? DIMENSION / 2 - i\r\n            : -i + DIMENSION / 2\r\n        }`,\r\n        x + (cellSize * DIMENSION) / 2 + 5,\r\n        y + cellSize * i + 5\r\n      );\r\n    }\r\n    ctx.moveTo(x, y);\r\n    for (let i = 0; i <= DIMENSION; i++) {\r\n      ctx.moveTo(x + cellSize * i, y);\r\n      ctx.strokeStyle = lineStyle;\r\n      ctx.lineTo(x + cellSize * i, y + SIZE);\r\n      ctx.fillText(\r\n        `${i <= DIMENSION / 2 ? -DIMENSION / 2 + i : i - DIMENSION / 2}`,\r\n        x + cellSize * i - 12,\r\n        y + (cellSize * DIMENSION) / 2 + 17\r\n      );\r\n    }\r\n    ctx.stroke();\r\n  },\r\n\r\n  drawAxis: ({\r\n    ctx,\r\n    x = GRID_MARGIN,\r\n    y = GRID_MARGIN,\r\n    lineStyle = \"black\"\r\n  }) => {\r\n    ctx.setLineDash([0]);\r\n    ctx.lineWidth = 3;\r\n    ctx.beginPath();\r\n    ctx.moveTo(x + (cellSize * DIMENSION) / 2, y);\r\n    ctx.lineTo(x + (cellSize * DIMENSION) / 2, y + cellSize * DIMENSION);\r\n    ctx.moveTo(x, y + (cellSize * DIMENSION) / 2);\r\n    ctx.lineTo(x + cellSize * DIMENSION, y + (cellSize * DIMENSION) / 2);\r\n    ctx.strokeStyle = lineStyle;\r\n    ctx.stroke();\r\n  },\r\n\r\n  drawTriangle: ({ x1, y1, x2, y2, x3, y3, ctx, lineStyle, fillStyle}) => {\r\n    ctx.beginPath();\r\n    ctx.strokeStyle = lineStyle;\r\n    ctx.fillStyle = fillStyle;\r\n    ctx.moveTo(x1, y1);\r\n    ctx.lineTo(x2, y2);\r\n    ctx.lineTo(x3, y3);\r\n    ctx.closePath();\r\n    ctx.stroke();\r\n    ctx.fill();\r\n  },\r\n\r\n  drawText: ({ ctx, fillStyle, text }) => {\r\n    ctx.fillStyle = fillStyle;\r\n    ctx.font = \"30px Arial\";\r\n    ctx.fillText(text.text, text.x, text.y);   \r\n  }\r\n};\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport d from \"./drawUtil\";\r\nimport \"./Canvas.css\";\r\nimport \"tachyons\";\r\n\r\nconst Canvas = props => {\r\n  const canvasEl = useRef(null);\r\n\r\n  useEffect(() => {\r\n    // check if the browser supports canvas\r\n    if (canvasEl.current.getContext) {\r\n      var ctx = canvasEl.current.getContext(\"2d\");\r\n      ctx.clearRect(0, 0, canvasEl.current.width, canvasEl.current.height);\r\n      // draw a 10 x 10 (by default) grid\r\n      d.drawGrid({\r\n        ctx,\r\n        labelFillStyle: \"orange\",\r\n        lineStyle: \"#ddd\",\r\n        fillStyle: \"rgba(0,0,0,.2)\"\r\n      });\r\n      d.drawAxis({ ctx, lineStyle: \"#000\" });\r\n      // draw starting triangle\r\n      d.drawTriangle({\r\n        ...props.current,\r\n        ctx,\r\n        lineStyle: (props.lose === true ? \"red\" : \"rgb(155,189,238)\"),\r\n        fillStyle: (props.lose === true ? \"red\" : \"rgba(155, 189,238,0.8)\"),\r\n      });\r\n      // draw target triangle\r\n      d.drawTriangle({\r\n        ...props.target,\r\n        ctx,\r\n        lineStyle: (props.win === true ? \"greenyellow\" : \"rgb(188,198,34)\"),\r\n        fillStyle: (props.win === true ? \"greenyellow\" : \"rgba(188,198,34, 0.8)\"),\r\n      });\r\n      // draw exit text\r\n      d.drawText({\r\n        ctx,\r\n        fillStyle: \"black\",\r\n        text: { text: \"Exit\", x: 740, y: 760 }\r\n      });\r\n    }\r\n  });\r\n\r\n  return (\r\n    <canvas\r\n      id=\"canvas\"\r\n      ref={canvasEl}\r\n      width={props.width}\r\n      height={props.width * 1}\r\n      style={{ border: \"1px solid black\" }}\r\n    >\r\n      Please switch to browser that supports canvas API\r\n    </canvas>\r\n  );\r\n};\r\n\r\nexport default Canvas;\r\n","import React from \"react\";\r\nimport \"tachyons\";\r\n\r\nconst CustomMoveCtrl = props => {\r\n  const [translate, reflect, rotate] = props.movement;\r\n\r\n  //-----------------------block code starts--------------------------------------------------\r\n  let onDragOver = ev => {\r\n    ev.preventDefault();\r\n    ev.target.style.cursor = \"grabbing\";\r\n  };\r\n\r\n  let onDragStart = (ev, name) => {\r\n    ev.dataTransfer.setData(\"id\", name);\r\n  };\r\n\r\n  let onDrop = (ev, category) => {\r\n    let name = ev.dataTransfer.getData(\"id\");\r\n    // let selectedMove = \r\n    props.moves.filter(move => {\r\n      if (move.name === name) {\r\n        move.category = category;\r\n        if (move.category === \"staged\" && move.moveType === \"reflect\") {\r\n          reflect(props.triangleCoords, move.reflectX, move.reflectY, move.cre);\r\n        }\r\n        if (move.category === \"staged\" && move.moveType === \"translate\") {\r\n          translate(props.triangleCoords, move.ixt, move.iyt);\r\n        }\r\n        if (move.category === \"staged\" && move.moveType === \"rotate\") {\r\n          rotate(props.triangleCoords, move.ixro, move.iyro, move.rotateFactor);\r\n        }\r\n      }\r\n    });\r\n    let updatedMoves = [...props.moves]; //copy old array data\r\n\r\n    // for (let item of updatedMoves) {\r\n    //   if (item.name === selectedMove.name) {\r\n    //     item = selectedMove;\r\n    //   }\r\n    // }\r\n    // props.setMoves(updatedMoves);\r\n  };\r\n\r\n  let displayMoves = {\r\n    preStage: [],\r\n    staged: []\r\n  };\r\n  props.moves.forEach(t => {\r\n    displayMoves[t.category].push(\r\n      <div\r\n        key={t.name}\r\n        onDragStart={\r\n          t.category === \"staged\" || props.moving === true ? null : e => onDragStart(e, t.name)\r\n        }\r\n        draggable\r\n        className={\"draggable \" + t.style + \" tc f5 pa0\"}\r\n      >\r\n        {t.name}\r\n      </div>\r\n    );\r\n  });\r\n\r\n  //-----------------------block code ends--------------------------------------------------\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"top-container\">\r\n        <h2 className=\"tc f3 pa0\">Please Select A Move</h2>\r\n        {\r\n          //original controller goes here\r\n        }\r\n        <span className=\"move-header\">Moves:</span>\r\n        <div\r\n          className=\"preStage\"\r\n          onDragOver={e => onDragOver(e)}\r\n          onDrop={e => {\r\n            onDrop(e, \"preStage\");\r\n          }}\r\n        >\r\n          {displayMoves.preStage}\r\n        </div>\r\n      </div>\r\n      <div className=\"bottom-container\">\r\n        <span className=\"move-header\">Drop Here:</span>\r\n        <div\r\n          className=\"droppable\"\r\n          onDragOver={e => onDragOver(e)}\r\n          onDrop={e => onDrop(e, \"staged\")}\r\n        >\r\n          {displayMoves.staged}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CustomMoveCtrl;\r\n\r\n//------------------------old handlers for advanced menu---------------------------------------\r\n// const ixt = useRef(null);\r\n// const iyt = useRef(null);\r\n// const ixro = useRef(null);\r\n// const iyro = useRef(null);\r\n// const cre = useRef(null);\r\n\r\n// let [rotateDirection, setRotateDirection] = useState(null);\r\n// let [rotateFactor, setRotateFactor] = useState(\"90\");\r\n// let [reflectAxis, setReflectAxis] = useState(null);\r\n\r\n// const handleTranslate = () => {\r\n//   if (ixt.current.value === \"\" || iyt.current.value === \"\") return;\r\n//   translate(\r\n//     props.triangleCoords,\r\n//     Number(ixt.current.value),\r\n//     Number(iyt.current.value)\r\n//   );\r\n//   ixt.current.value = 0;\r\n//   iyt.current.value = 0;\r\n//   // console.log(ixt.current.value, iyt.current.value);\r\n// };\r\n\r\n// const handleRotate = () => {\r\n//   if (!rotateDirection) {\r\n//     console.log(rotateDirection)\r\n//     return\r\n//   }\r\n//   else if (rotateDirection === \"optionClockwise\") {\r\n//     rotate(\r\n//       props.triangleCoords,\r\n//       Number(ixro.current.value),\r\n//       Number(iyro.current.value),\r\n//       Number(-rotateFactor)\r\n//     );\r\n//     ixro.current.value = 0;\r\n//     iyro.current.value = 0;\r\n//     setRotateDirection(null);\r\n//     setRotateFactor(\"90\");\r\n//   }\r\n//   else if (rotateDirection === \"optionCounterClockwise\") {\r\n//     rotate(\r\n//       props.triangleCoords,\r\n//       Number(ixro.current.value),\r\n//       Number(iyro.current.value),\r\n//       Number(rotateFactor)\r\n//     );\r\n//     ixro.current.value = 0;\r\n//     iyro.current.value = 0;\r\n//     setRotateDirection(null);\r\n//     setRotateFactor(\"90\");\r\n//     // console.log(ixro.current.value, iyro.current.value, degro.current.value);\r\n//   }\r\n// };\r\n\r\n// const handleReflect = () => {\r\n//   if (!reflectAxis) {\r\n//     return\r\n//   }\r\n//   else {\r\n//     reflect(\r\n//       props.triangleCoords,\r\n//       reflectAxis === \"optionX\" ? Number(1) : 0,\r\n//       reflectAxis === \"optionY\" ? Number(1) : 0,\r\n//       cre.current.value == \"\" ? 0 : Number(-cre.current.value)\r\n//     );\r\n//     cre.current.value = 0;\r\n//     setReflectAxis(null);\r\n//   }\r\n// };\r\n\r\n//--------------------------old return code for advanced menu-------------------------------\r\n\r\n// {/* <div className=\"tc custom-ops\"> */}\r\n// <div className=\"translate-container bg-washed-red\">\r\n//   {/* <div className=\"translate ma2 bg-washed-red\"> */}\r\n//   <text className=\"menu-header\">Translate</text><br />\r\n//   <label htmlFor=\"xUnitt\">\r\n//     X:\r\n//     <input\r\n//       className=\"menu-item\"\r\n//       type=\"number\"\r\n//       min={-DIMENSION / 2}\r\n//       max={DIMENSION / 2}\r\n//       id=\"xUnitt\"\r\n//       ref={ixt}\r\n//       defaultValue=\"0\"\r\n//     />\r\n//   </label>\r\n//   <label htmlFor=\"yUnitt\">\r\n//     Y:\r\n//     <input\r\n//       className=\"menu-item\"\r\n//       type=\"number\"\r\n//       id=\"yUnitt\"\r\n//       min={-DIMENSION / 2}\r\n//       max={DIMENSION / 2}\r\n//       ref={iyt}\r\n//       defaultValue=\"0\"\r\n//     />\r\n//   </label>\r\n//   <br />\r\n//   <button className=\"menu-button\" onClick={handleTranslate}>Translate</button>\r\n//   {/* </div> */}\r\n// </div>\r\n// <div className=\"rotate-container bg-washed-green\">\r\n//   {/* <div className=\"rotate ma2 bg-washed-green\"> */}\r\n//   <text className=\"menu-header\">Rotate 90째</text><br />\r\n//   <label htmlFor=\"degro\">\r\n//     Clockwise\r\n//         <input\r\n//       className=\"menu-item\"\r\n//       type=\"radio\"\r\n//       value=\"optionClockwise\"\r\n//       checked={rotateDirection === \"optionClockwise\"}\r\n//       onChange={(event) => { setRotateDirection(event.target.value) }} />\r\n//     Counter Clockwise\r\n//         <input\r\n//       className=\"menu-item\"\r\n//       type=\"radio\"\r\n//       value=\"optionCounterClockwise\"\r\n//       checked={rotateDirection === \"optionCounterClockwise\"}\r\n//       onChange={(event) => { setRotateDirection(event.target.value) }} />\r\n//     Factor\r\n//         <select\r\n//       className=\"menu-item\"\r\n//       onChange={(event) => { setRotateFactor(event.target.value) }}\r\n//       value={rotateFactor}\r\n//       defaultValue=\"90\">\r\n//       <option value=\"90\">1</option>\r\n//       <option value=\"180\">2</option>\r\n//       <option value=\"270\">3</option>\r\n//       <option value=\"360\">4</option>\r\n//     </select>\r\n//     <br />\r\n//     Focal Point&nbsp;\r\n//         <label htmlFor=\"xUnitro\">\r\n//       X:\r\n//         <input\r\n//         className=\"menu-item\"\r\n//         type=\"number\"\r\n//         min={-DIMENSION / 2}\r\n//         max={DIMENSION / 2}\r\n//         id=\"xUnitro\"\r\n//         ref={ixro}\r\n//         defaultValue=\"0\"\r\n//       />\r\n//     </label>\r\n//     <label htmlFor=\"yUnitro\">\r\n//       Y:\r\n//         <input\r\n//         className=\"menu-item\"\r\n//         type=\"number\"\r\n//         min={-DIMENSION / 2}\r\n//         max={DIMENSION / 2}\r\n//         id=\"yUnitro\"\r\n//         ref={iyro}\r\n//         defaultValue=\"0\"\r\n//       />\r\n//     </label>\r\n//     {/* deg:\r\n//         <input type=\"number\" id=\"degro\" ref={degro} defaultValue=\"90\" /> */}\r\n//   </label>\r\n//   {/* </div> */}\r\n//   <br />\r\n//   <button className=\"menu-button\" onClick={handleRotate}>Rotate</button>\r\n// </div>\r\n// <div className=\"reflect-container bg-lightest-blue\">\r\n//   {/* <div className=\"reflect ma2 bg-lightest-blue\"> */}\r\n//   <text className=\"menu-header\">Reflect</text><br />\r\n//   <label htmlFor=\"are\">\r\n//     X-Axis\r\n//         <input\r\n//       className=\"menu-item\"\r\n//       type=\"radio\"\r\n//       value=\"optionX\"\r\n//       checked={reflectAxis === 'optionX'}\r\n//       onChange={(event) => { setReflectAxis(event.target.value) }} />\r\n//   </label>\r\n//   {/* <span className=\"f4\">or</span> */}\r\n//   <label htmlFor=\"bre\">\r\n//     Y-Axis\r\n//         <input\r\n//       className=\"menu-item\"\r\n//       type=\"radio\"\r\n//       value=\"optionY\"\r\n//       checked={reflectAxis === 'optionY'}\r\n//       onChange={(event) => { setReflectAxis(event.target.value) }} />\r\n//   </label>\r\n//   <label htmlFor=\"cre\">\r\n//     <input\r\n//       className=\"menu-item\"\r\n//       type=\"number\"\r\n//       min={-DIMENSION / 2}\r\n//       max={DIMENSION / 2}\r\n//       id=\"cre\"\r\n//       ref={cre}\r\n//       defaultValue=\"0\"\r\n//     />\r\n//     + / -\r\n//       </label>\r\n//   <br />\r\n//   <button className=\"menu-button\" onClick={handleReflect}>Reflect</button>\r\n//   {/* </div> */}\r\n// </div>\r\n// {/* </div> */}\r\n","import { SIZE, UNIT, GRID_MARGIN } from \"./settings\";\r\n\r\n// Object.size = obj => {\r\n//   let size = 0,\r\n//     key;\r\n//   for (key in obj) {\r\n//     if (obj.hasOwnProperty(key)) size++;\r\n//   }\r\n//   return size;\r\n// };\r\n\r\n// const round = Math.round;\r\nconst PI = Math.PI;\r\n\r\nexport const mapToCanvasCoordsFromPixel = gameCoordsInPixel => {\r\n  const mapped = {};\r\n  for (let [key, value] of Object.entries(gameCoordsInPixel)) {\r\n    if (key.includes(\"x\")) mapped[key] = SIZE / 2 + value + GRID_MARGIN;\r\n    else mapped[key] = SIZE / 2 - value + GRID_MARGIN;\r\n  }\r\n  return mapped;\r\n};\r\n\r\nexport const mapToCanvasCoords = gameCoords => {\r\n  const mapped = {};\r\n  for (let [key, value] of Object.entries(gameCoords)) {\r\n    if (key.includes(\"x\")) mapped[key] = value * UNIT + SIZE / 2 + GRID_MARGIN;\r\n    else mapped[key] = SIZE / 2 - value * UNIT + GRID_MARGIN;\r\n  }\r\n  return mapped;\r\n};\r\n\r\nexport const mapToGameCoords = canvasCoords => {\r\n  const mapped = {};\r\n  for (let [key, value] of Object.entries(canvasCoords)) {\r\n    if (key.includes(\"x\"))\r\n      mapped[key] = (value - SIZE / 2 - GRID_MARGIN) / UNIT;\r\n    else mapped[key] = (SIZE / 2 + GRID_MARGIN - value) / UNIT;\r\n  }\r\n  return mapped;\r\n};\r\n\r\nexport const mapToGameCoordsInPixel = canvasCoords => {\r\n  const mapped = {};\r\n  for (let [key, value] of Object.entries(canvasCoords)) {\r\n    if (key.includes(\"x\")) mapped[key] = value - SIZE / 2 - GRID_MARGIN;\r\n    else mapped[key] = SIZE / 2 + GRID_MARGIN - value;\r\n  }\r\n  return mapped;\r\n};\r\n\r\nexport const distance = (x1, y1, x2, y2) => {\r\n  return Number(\r\n    Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2)).toFixed(2)\r\n  );\r\n};\r\n\r\n// export const translateHelper = (canvasCoords, xu, yu) => {\r\n//   const translated = {};\r\n//   for (let [key, value] of Object.entries(canvasCoords)) {\r\n//     if (key.includes(\"x\")) {\r\n//       translated[key] = value + xu * UNIT;\r\n//     } else {\r\n//       translated[key] = value + yu * UNIT;\r\n//     }\r\n//   }\r\n//   return translated;\r\n// };\r\n\r\n// change shape from { x1:.., y1:.., x2:.., y2:..} to {1:{x:..,y..}, 2:{x:..,y:..}}\r\nexport const reorgCoords = coords => {\r\n  const reorgedCoords = {};\r\n  for (let [key, value] of Object.entries(coords)) {\r\n    const coordPair = {};\r\n    coordPair[`${key.slice(0, 1)}`] = value;\r\n    reorgedCoords[`${key.slice(key.length - 1)}`] = Object.assign(\r\n      {\r\n        ...reorgedCoords[`${key.slice(key.length - 1)}`]\r\n      },\r\n      coordPair\r\n    );\r\n  }\r\n  return reorgedCoords;\r\n};\r\n\r\nexport default {\r\n  rotate: (coords, xr, yr, deg) => {\r\n    // all in game coords\r\n    // x1' = (x1 - xr)cos(deg) - (y1 - yr)sin(deg) + xr\r\n    // y1' = (x1 - xr)sin(deg) + (y1 - yr)cos(deg) + yr\r\n    const rotated = {};\r\n    let sinDeg = Math.sin((deg / 180) * PI);\r\n    let cosDeg = Math.cos((deg / 180) * PI);\r\n    coords = reorgCoords(mapToGameCoords(coords));\r\n    for (let [idx, pt] of Object.entries(coords)) {\r\n      rotated[`x${idx}`] = Math.round((pt.x - xr) * cosDeg - (pt.y - yr) * sinDeg + xr);\r\n      rotated[`y${idx}`] = Math.round((pt.x - xr) * sinDeg + (pt.y - yr) * cosDeg + yr);\r\n    }\r\n    return mapToCanvasCoords(rotated);\r\n  },\r\n\r\n  translate: (coords, xu, yu) => {\r\n    coords = mapToGameCoordsInPixel(coords);\r\n    const translated = {};\r\n    for (let [key, value] of Object.entries(coords)) {\r\n      if (key.includes(\"x\")) {\r\n        translated[key] = Math.round(value + xu * UNIT);\r\n      } else {\r\n        translated[key] = Math.round(value + yu * UNIT);\r\n      }\r\n    }\r\n    return mapToCanvasCoordsFromPixel(translated);\r\n  },\r\n\r\n  reflect: (coords, a, b, c) => {\r\n    const reflected = {};\r\n    coords = reorgCoords(mapToGameCoords(coords));\r\n    for (let [idx, pt] of Object.entries(coords)) {\r\n      reflected[`x${idx}`] =\r\n        Math.round(((b * b - a * a) * pt.x - 2 * a * b * pt.y - 2 * a * c) /\r\n          (a * a + b * b));\r\n      reflected[`y${idx}`] =\r\n        Math.round(((a * a - b * b) * pt.y - 2 * a * b * pt.x - 2 * b * c) /\r\n          (a * a + b * b));\r\n    }\r\n    return mapToCanvasCoords(reflected);\r\n  }\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { SIZE, GRID_MARGIN, initTriangleShape } from \"./components/settings\";\r\nimport Canvas from \"./components/Canvas\";\r\nimport CustomMoveCtrl from \"./components/CustomMoveCtrl\";\r\nimport m, { mapToCanvasCoords } from \"./components/moveUtil\";\r\n\r\nconst App = () => {\r\n  // --- This becomes part of Level Object/State/Array Package ---\r\n  const [x1, y1] = [GRID_MARGIN, GRID_MARGIN];\r\n  const triangle = initTriangleShape(x1, y1);\r\n  const target = mapToCanvasCoords({ x1: 10, y1: -6, x2: 10, y2: -9, x3: 6, y3: -9 });\r\n  let [current, setCurrent] = useState(triangle);\r\n  let [moving, setMoving ] = useState(false);\r\n  let [coords, setCoords] = useState(triangle);\r\n  let [moves, setMoves] = useState([\r\n    { name: \"Translate X-Axis 5, Y-Axis -3\", category: \"preStage\", moveType: \"translate\", ixt: 5, iyt: -3, style: \"translate\" },\r\n    { name: \"Reflect Y Axis \", category: \"preStage\", moveType: \"reflect\", reflectX: 1, reflectY: 0, cre: 0, style: \"reflect\" },\r\n    { name: \"Translate X-Axis 0, Y-Axis -7\", category: \"preStage\", moveType: \"translate\", ixt: 0, iyt: -7, style: \"translate\" },\r\n    { name: \"Rotate 180째 Origin (0, 0) Counter-Clockwise\", category: \"preStage\", moveType: \"rotate\", ixro: 0, iyro: 0, rotateFactor: 180, style: \"rotate\" },\r\n    { name: \"Reflect X Axis\", category: \"preStage\", moveType: \"reflect\", reflectX: 0, reflectY: 1, cre: 0, style: \"reflect\" },\r\n    { name: \"Rotate 90째 Origin (0, 0) Clockwise\", category: \"preStage\", moveType: \"rotate\", ixro: 0, iyro: 0, rotateFactor: -90, style: \"rotate\" },\r\n    { name: \"Translate X-Axis 0, Y-Axis -9\", category: \"preStage\", moveType: \"translate\", ixt: 0, iyt: -9, style: \"translate\" },\r\n    { name: \"Translate X-Axis -5, Y-Axis 3\", category: \"preStage\", moveType: \"translate\", ixt: -5, iyt: 3, style: \"translate\" },\r\n    { name: \"Rotate 270째 Origin (0, 0) Clockwise\", category: \"preStage\", moveType: \"rotate\", ixro: 0, iyro: 0, rotateFactor: -270, style: \"rotate\" },\r\n  ]);\r\n  let [win, setWin] = useState(false)\r\n  let [lose, setLose] = useState(0);\r\n  // --- ---\r\n\r\n  const handleRestart = () => {\r\n    window.location.reload(true);\r\n  };\r\n\r\n  const translate = (current, xUnit, yUnit) => {\r\n    let transformedCoords = m.translate(current, xUnit, yUnit);\r\n    setCoords(coords = transformedCoords);\r\n    handleTranslateAnimate(current, coords);\r\n  };\r\n\r\n  const rotate = (current, xUnit, yUnit, deg) => {\r\n    let transformedCoords = m.rotate(current, xUnit, yUnit, deg);\r\n    setCoords(coords = transformedCoords);\r\n    handleRotateAnimate(current, coords, deg);\r\n  };\r\n\r\n  const reflect = (current, a, b, c) => {\r\n    let transformedCoords = m.reflect(current, a, b, c);\r\n    setCurrent(current = transformedCoords);\r\n    setCoords(coords = transformedCoords);\r\n    winLoseCheck(current, target);\r\n  };\r\n\r\n  const handleTranslateAnimate = (current, destination) => {\r\n    setMoving(true);\r\n    if (current.x1 !== destination.x1 || current.x2 !== destination.x2 || current.x3 !== destination.x3) {\r\n      setCurrent(current);\r\n      setCurrent(current.x1 = (current.x1 < destination.x1 ? current.x1 + 10 : current.x1 - 10));\r\n      setCurrent(current);\r\n      setCurrent(current.x2 = (current.x2 < destination.x2 ? current.x2 + 10 : current.x2 - 10));\r\n      setCurrent(current);\r\n      setCurrent(current.x3 = (current.x3 < destination.x3 ? current.x3 + 10 : current.x3 - 10));\r\n      setCurrent(current);\r\n      setTimeout(() => { handleTranslateAnimate(current, destination) }, 1);\r\n    }\r\n    else if (current.y1 !== destination.y1 || current.y2 !== destination.y2 || current.y3 !== destination.y3) {\r\n      setCurrent(current);\r\n      setCurrent(current.y1 = (current.y1 < destination.y1 ? current.y1 + 10 : current.y1 - 10));\r\n      setCurrent(current);\r\n      setCurrent(current.y2 = (current.y2 < destination.y2 ? current.y2 + 10 : current.y2 - 10));\r\n      setCurrent(current);\r\n      setCurrent(current.y3 = (current.y3 < destination.y3 ? current.y3 + 10 : current.y3 - 10));\r\n      setCurrent(current);\r\n      setTimeout(() => { handleTranslateAnimate(current, destination) }, 1);\r\n    }\r\n    else {\r\n      setCurrent(current = destination);\r\n      setMoving(false);\r\n      winLoseCheck(current, target);  \r\n      return;\r\n    }\r\n  };\r\n\r\n  const handleRotateAnimate = (current, destination, deg) => {\r\n    setMoving(true);\r\n    if (current.x1 !== destination.x1 || current.x2 !== destination.x2 || current.x3 !== destination.x3) {\r\n      let rotateDest = m.rotate(current, 0, 0, (deg > 0 ? 90 : -90));\r\n      setCurrent(current);\r\n      setCurrent(current.x1 = rotateDest.x1);\r\n      setCurrent(current.y1 = rotateDest.y1);\r\n      setCurrent(current);\r\n      setCurrent(current.x2 = rotateDest.x2);\r\n      setCurrent(current.y2 = rotateDest.y2);\r\n      setCurrent(current);\r\n      setCurrent(current.x3 = rotateDest.x3);\r\n      setCurrent(current.y3 = rotateDest.y3);\r\n      setCurrent(current);\r\n      setTimeout(() => { handleRotateAnimate(current, destination, deg) }, 750);\r\n    }\r\n    else {\r\n      setCurrent(current = destination);\r\n      setMoving(false);\r\n      winLoseCheck(current, target);\r\n      return;\r\n    }\r\n  };\r\n\r\n  // const handleReflectAnimate = (current, destination) => {\r\n  //   if (current.x1 !== destination.x1) {\r\n  //     setCurrent(current);\r\n  //   }\r\n  //   else if (current.y1 !== destination.y1) {\r\n  //     setCurrent(current);\r\n  //   }\r\n  //   winLoseCheck(current, target);\r\n  //   setTimeout(() => { handleReflectAnimate(current, destination) }, 1);\r\n  // };\r\n\r\n  const winLoseCheck = (current, exit) => {\r\n    if (JSON.stringify(current) === JSON.stringify(exit)) {\r\n      setWin(true);\r\n    }\r\n    else {\r\n      if (lose === 0 && (current.x1 > 820 || current.x2 > 820 || current.x3 > 820 || current.x1 < 20 || current.x2 < 20 || current.x3 < 20 || current.y1 > 820 || current.y2 > 820 || current.y3 > 820 || current.y1 < 20 || current.y2 < 20 || current.y3 < 20)) {\r\n        setLose(2);\r\n      }\r\n      let movesLeft = moves.find(move => move.category === \"preStage\");\r\n      if (lose === 0 && movesLeft === undefined) {\r\n        setLose(1);\r\n      }\r\n      else return;\r\n    }\r\n  };\r\n\r\n  const PopUp = () => (\r\n    <div className='popup'>\r\n      <div className='popup_inner'>\r\n        <h1\r\n          className={win === true ? \"win-font\" : \"lose-font\"}>\r\n          {win === true ? \"You Win!\" : (lose === 1 ? \"You Ran Out Of Moves :(\" : \"Out Of Bounds!\")}\r\n        </h1>\r\n        <button className=\"restart-button\" onClick={() => handleRestart()}>Play Again?</button>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <div className=\"Canvas\">\r\n        <div\r\n          className=\"sans-serif\"\r\n          style={{\r\n            position: \"absolute\",\r\n            top: \"50%\",\r\n            left: \"40%\",\r\n            transform: \"translate(-50%, -50%)\"\r\n          }}\r\n        >\r\n          <Canvas\r\n            width={SIZE + GRID_MARGIN * 2}\r\n            triangle={triangle}\r\n            target={target}\r\n            current={current}\r\n            setCurrent={setCurrent}\r\n            destination={coords}\r\n            win={win}\r\n            lose={lose}\r\n          />\r\n        </div>\r\n      </div>\r\n      <div className=\"right-container\">\r\n        <CustomMoveCtrl\r\n          triangleCoords={coords}\r\n          movement={[translate, reflect, rotate]}\r\n          moves={moves}\r\n          setMoves={setMoves}\r\n          moving={moving}\r\n        />\r\n      </div>\r\n      <div>\r\n        {win === true || lose === 1 || lose === 2 ? <PopUp /> : null}\r\n      </div>\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}